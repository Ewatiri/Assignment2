<html>
  <style type = "text/css">
  </style>
  <script type = "text/javascript">
    all = [];
	names = [];
	var elem = "";
	globe ={};
    $(document).ready(function(){
	 $("#indicators").click(function(){
	   $("#indicators").attr("disabled","true");
	      elem = "indicators";
	      fetch();
	 
	 });
	});
	
	$(document).ready(function(){
	 $("#delems").click(function(){
	   $("#delems").attr("disabled","true");
	      elem = "dataElements";
	      fetch();
	 
	 });
	});
		
    function fetch(){
	 all =[];
	 names = [];
	 globe ={};
	 $.get('../api/'+elem+'.json',function(data){
	    $(data[elem]).each(function (ind,data2){
		  all.push(data2.id);
		  names.push(data2.name);
		});
	 }).done(function(){
	     getDataSet();
		 });
	 
	}
	
	function getDataSet(){
	console.log(all.length);
	$.get('../api/dataSets.json',function(data){
	   $(data.dataSets).each(function(ind, d1){
	     y = $.get(d1.href+'.json',function(d2){
		   $(d2[elem]).each(function (ind1,d3){
		     $(all).each(function(ind2,d4){
			    if (d4 == d3.id)
				{
				  globe[d4] = d1.href;
				}
			 });
		   });
		 });
	   });
	 }).done(function(){
	   y.done(function(){
	     console.dir(globe);
	   });
	   
	 });
	}
  </script>
  <div>
    <button id = "indicators">Indicators</button>
	<button id = "delems">Data Elements</button>
  </div>
</html>